#:kivy 1.11.1
#:import sm kivy.uix.screenmanager
#:set bg_col [252/255, 227/255, 210/255]
#:set or_col [242/255, 139/255, 65/255]
#:import utils kivy.utils

WindowManager:
    MapScreen
    NewSightingScreen
    ProfileScreen

<MainMenuScreen@GridLayout>
    columns:2

<MapScreen>:
    name: "map"
    canvas.before:
        Color
            rgb: bg_col
        Rectangle:
            pos: self.pos
            size: self.size
    GridLayout:
        rows:2

        BoxLayout:
            padding: 8
            size_hint_y: 0.12
            Button:
                background_normal: ''
                background_color: 191/255, 76/255, 63/255
                padding: 1, 1
                text: "Search"
                on_release:
                    root.UpdateMap()


        BoxLayout:

            padding: 25, 8, 25, 25+48
            MapWidget
#    NewMenu
    MenuBar


<NewSightingScreen>:
    name: "newsighting"
    canvas.before:
        Color:
            rgb: bg_col
        Rectangle:
            pos: self.pos
            size: self.size
    NewSightingWidget
    MenuBar


<ProfileScreen>:
    name: "profile"
    canvas.before:
        Color:
            rgb: bg_col
        Rectangle:
            pos: self.pos
            size: self.size
    ProfileWidget
    MenuBar


#<MenuButton@Button>:
#    background_color: 0,0,0,0
#    background_down:
#    size_hint: None, None
#
#<NewMenu@Widget>:
#    FloatLayout:
#        pos_hint: {'bottom':1}
#        canvas.before:
#            Color
#                rgb: or_col
#            Rectangle:
#                pos: self.pos
#                size: root.width, 70
#        MenuButton:
#            width: root.width/3
#            height: self.height
#



<MenuBar>:
    ActionBar:
        pos_hint: {'bottom':1}
        width: root.width
        background_normal: ''
        background_image: '' #need to set it to white first
        background_color: utils.get_color_from_hex('#f5b642')
        ActionView:
            use_separator: True
            ActionPrevious:
                title: 'Menu bar'

            ActionButton:
                text: 'Map'
#                size_hint_x: None
#                width: root.width / 3
                on_release:
                    app.root.transition= sm.FadeTransition()
                    app.root.current = "map"
            ActionButton:
                text: 'Add sighting'
#                size_hint_x: None
#                width: root.width / 3
                on_release:
                    app.root.transition= sm.FadeTransition()
                    app.root.current = "newsighting"
            ActionButton:
                text: 'My Profile'
#                size_hint_x: None
#                width: root.width / 3
                on_release:
                    app.root.transition= sm.FadeTransition()
                    app.root.current = "profile"




